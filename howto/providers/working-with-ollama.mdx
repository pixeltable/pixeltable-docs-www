---
title: "Working with Ollama in Pixeltable"
sidebarTitle: "Ollama"
icon: "notebook"
---
<a href="https://kaggle.com/kernels/welcome?src=https://github.com/pixeltable/pixeltable/blob/release/docs/release/howto/providers/working-with-ollama.ipynb" id="openKaggle" target="_blank" rel="noopener noreferrer"><img src="https://kaggle.com/static/images/open-in-kaggle.svg" alt="Open in Kaggle" style={{ display: 'inline', margin: '0px' }} noZoom /></a>&nbsp;&nbsp;<a href="https://colab.research.google.com/github/pixeltable/pixeltable/blob/release/docs/release/howto/providers/working-with-ollama.ipynb" id="openColab" target="_blank" rel="noopener noreferrer"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open in Colab" style={{ display: 'inline', margin: '0px' }} noZoom /></a>&nbsp;&nbsp;<a href="https://raw.githubusercontent.com/pixeltable/pixeltable/refs/tags/release/docs/release/howto/providers/working-with-ollama.ipynb" id="downloadNotebook" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/%E2%AC%87-Download%20Notebook-blue" alt="Download Notebook" style={{ display: 'inline', margin: '0px' }} noZoom /></a>

<Tip>This documentation page is also available as an interactive notebook. You can launch the notebook in
Kaggle or Colab, or download it for use with an IDE or local Jupyter installation, by clicking one of the
above links.</Tip>




export const quartoRawHtml =
[`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">input</th>
<th data-quarto-table-cell-role="th">response</th>
</tr>
</thead>
<tbody>
<tr>
<td style="vertical-align: middle;">What are the most popular services for LLM inference?</td>
<td style="vertical-align: middle;">LLM inference is a type of artificial intelligence that can generate
human-like text based on specific input data. In order to find the most
popular services for LLM inference, we need to consider several factors
such as the availability of resources, the quality of the models, and
the popularity among users. One common service for LLM inference is
Hugging Face's transformers library, which provides a wide range of
pre-trained language models including BERT, RoBERTa, and GPT-2. This
library ...... Qwen model, Hugging Face's transformers library, and many
more. The Alibaba Cloud LLM platform provides a wide range of
pre-trained models for various tasks, including language generation,
text classification, and more. Overall, both Hugging Face's transformers
library and the Alibaba Cloud LLM platform offer popular services for
LLM inference. However, it is essential to consider the specific use
case and requirements when choosing a service, as each has its own
strengths and limitations.</td>
</tr>
</tbody>
</table>
`];

Ollama is a popular platform for local serving of LLMs. In this
tutorial, we’ll show how to integrate Ollama models into a Pixeltable
workflow.

## Install Ollama

You’ll need to have an Ollama server instance to query. There are
several ways to do this.

### Running on a local machine

If you’re running this notebook on your own machine, running Windows,
Mac OS, or Linux, you can install Ollama at: https://ollama.com/download

### Running on Google Colab

-   OR, if you’re running on Colab, you can install Ollama by
    uncommenting and running the following code.


```python
# To install Ollama on colab, uncomment and run the following
# three lines (this will also work on a local Linux machine
# if you don't already have Ollama installed).

# !curl -fsSL https://ollama.com/install.sh | sh
# import subprocess
# ollama_process = subprocess.Popen(['ollama', 'serve'], stderr=subprocess.PIPE)
```

### Running on a remote Ollama server

-   OR, if you have access to an Ollama server running remotely, you can
    uncomment and run the following line, replacing the default URL with
    the URL of your remote Ollama instance.


```python
# To run the notebook against an instance of Ollama running on a
# remote server, uncomment the following line and specify the URL.

# os.environs['OLLAMA_HOST'] = 'https://127.0.0.1:11434'
```

Once you’ve completed the installation, run the following commands to
verify that it’s been successfully installed. This may result in an LLM
being downloaded, so it may take some time.


```python
%pip install -qU ollama
```


```python
import ollama

ollama.pull('qwen2.5:0.5b')
ollama.generate('qwen2.5:0.5b', 'What is the capital of Missouri?')[
    'response'
]
```

<pre style={{ 'margin': '-20px 20px 0px 20px', 'padding': '0px', 'background-color': 'transparent', 'color': 'black' }}>
&#x27;The&nbsp;capital&nbsp;of&nbsp;Missouri&nbsp;is&nbsp;Jefferson&nbsp;City.&nbsp;Jefferson&nbsp;City&nbsp;was&nbsp;originally&nbsp;named&nbsp;after&nbsp;the&nbsp;French&nbsp;explorer&nbsp;Pierre-Jacques&nbsp;Houget&nbsp;and&nbsp;the&nbsp;American&nbsp;statesman&nbsp;Thomas&nbsp;Jefferson,&nbsp;who&nbsp;lived&nbsp;in&nbsp;this&nbsp;city&nbsp;from&nbsp;1764&nbsp;to&nbsp;1805.&nbsp;It&nbsp;became&nbsp;the&nbsp;seat&nbsp;of&nbsp;government&nbsp;for&nbsp;most&nbsp;of&nbsp;Jefferson&nbsp;County&nbsp;when&nbsp;it&nbsp;was&nbsp;established&nbsp;in&nbsp;1836.&nbsp;In&nbsp;more&nbsp;recent&nbsp;times,&nbsp;the&nbsp;name&nbsp;has&nbsp;changed&nbsp;several&nbsp;times&nbsp;due&nbsp;to&nbsp;various&nbsp;political&nbsp;changes&nbsp;and&nbsp;legal&nbsp;changes.&#x27;
</pre>

## Install Pixeltable

Now, let’s install Pixeltable and create a table for the demo.


```python
%pip install -qU pixeltable
```


```python
import pixeltable as pxt
from pixeltable.functions.ollama import chat

pxt.drop_dir('ollama_demo', force=True)
pxt.create_dir('ollama_demo')
```

<pre style={{ 'margin': '-20px 20px 0px 20px', 'padding': '0px', 'background-color': 'transparent', 'color': 'black' }}>
Connected&nbsp;to&nbsp;Pixeltable&nbsp;database&nbsp;at:&nbsp;postgresql+psycopg://postgres:@/pixeltable?host=/Users/asiegel/.pixeltable/pgdata
Created&nbsp;directory&nbsp;&#x27;ollama_demo&#x27;.
&lt;pixeltable.catalog.dir.Dir&nbsp;at&nbsp;0x13e95cbb0&gt;
</pre>


```python
t = pxt.create_table('ollama_demo/chat', {'input': pxt.String})

messages = [{'role': 'user', 'content': t.input}]

# Add a computed column that runs the model to generate responses
t.add_computed_column(
    output=chat(
        messages=messages,
        model='qwen2.5:0.5b',
        # These parameters are optional and can be used to tune model behavior:
        options={'max_tokens': 300, 'top_p': 0.9, 'temperature': 0.5},
    )
)
```

<pre style={{ 'margin': '-20px 20px 0px 20px', 'padding': '0px', 'background-color': 'transparent', 'color': 'black' }}>
Created&nbsp;table&nbsp;&#x27;chat&#x27;.
Added&nbsp;0&nbsp;column&nbsp;values&nbsp;with&nbsp;0&nbsp;errors&nbsp;in&nbsp;0.01&nbsp;s
No&nbsp;rows&nbsp;affected.
</pre>


```python
# Extract the message content into a separate column
t.add_computed_column(response=t.output.message.content)
```

<pre style={{ 'margin': '-20px 20px 0px 20px', 'padding': '0px', 'background-color': 'transparent', 'color': 'black' }}>
Added&nbsp;0&nbsp;column&nbsp;values&nbsp;with&nbsp;0&nbsp;errors&nbsp;in&nbsp;0.01&nbsp;s
No&nbsp;rows&nbsp;affected.
</pre>

We can insert our input prompts into the table now. As always,
Pixeltable automatically updates the computed columns by calling the
relevant Ollama endpoint.


```python
# Start a conversation
t.insert(input='What are the most popular services for LLM inference?')
t.select(t.input, t.response).show()
```

<pre style={{ 'margin': '-20px 20px 0px 20px', 'padding': '0px', 'background-color': 'transparent', 'color': 'black' }}>
Inserted&nbsp;1&nbsp;row&nbsp;with&nbsp;0&nbsp;errors&nbsp;in&nbsp;1.28&nbsp;s&nbsp;(0.78&nbsp;rows/s)
</pre>

<div style={{ 'margin': '0px 20px 0px 20px' }} dangerouslySetInnerHTML={{ __html: quartoRawHtml[0] }} />

### Learn More

To learn more about advanced techniques like RAG operations in
Pixeltable, check out the [RAG Operations in
Pixeltable](/howto/use-cases/rag-operations)
tutorial.

If you have any questions, don’t hesitate to reach out.
